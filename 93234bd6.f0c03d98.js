(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{73:function(e,r,o){"use strict";o.r(r),o.d(r,"frontMatter",(function(){return n})),o.d(r,"metadata",(function(){return p})),o.d(r,"toc",(function(){return b})),o.d(r,"default",(function(){return l}));var t=o(3),c=o(7),a=(o(0),o(86)),n={id:"docker",title:"Docker and Docker Compose"},p={unversionedId:"docker",id:"docker",isDocsHomePage:!1,title:"Docker and Docker Compose",description:"Install Docker",source:"@site/docs/docker.md",slug:"/docker",permalink:"/thomswiki/docker",editUrl:"https://localhost:3000/docs/docker.md",version:"current",sidebar:"docs",previous:{title:"My Journal Wiki",permalink:"/thomswiki/"},next:{title:"Home-Assistant",permalink:"/thomswiki/Home-Assistant"}},b=[{value:"Install Docker",id:"install-docker",children:[]},{value:"Install Docker Compose",id:"install-docker-compose",children:[{value:"Add Linux User to Docker Group",id:"add-linux-user-to-docker-group",children:[]}]},{value:"Basic Docker and Docker Compose",id:"basic-docker-and-docker-compose",children:[{value:"Docker folder and permission",id:"docker-folder-and-permission",children:[]},{value:"Managing docker",id:"managing-docker",children:[]}]}],d={toc:b};function l(e){var r=e.components,o=Object(c.a)(e,["components"]);return Object(a.b)("wrapper",Object(t.a)({},d,o,{components:r,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"install-docker"},"Install Docker"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Install prerequisites packets"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"sudo apt-get install apt-transport-https ca-certificates curl software-proerties-common\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Add docker repository's GPG key"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Add docker repository"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},'sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"\n'))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Refresh Ubuntu packages list"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"sudo apt-get update\n")))),Object(a.b)("ol",{start:5},Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Install docker "),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"sudo apt-get install docker-ce\n")),Object(a.b)("p",{parentName:"li"},"check the installed version"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker --version\n")))),Object(a.b)("h2",{id:"install-docker-compose"},"Install Docker Compose"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Install ",Object(a.b)("a",{parentName:"p",href:"https://github.com/docker/compose/releases"},"latest version")," docker-compose "),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"sudo curl -L https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n")),Object(a.b)("p",{parentName:"li"},"Replace 1.23.2 with currently available version.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Provide execute permission to to docker-compose"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"sudo chmod +x /usr/local/bin/docker-compose\n")),Object(a.b)("p",{parentName:"li"},"check version number"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker-compose --version\n")))),Object(a.b)("h3",{id:"add-linux-user-to-docker-group"},"Add Linux User to Docker Group"),Object(a.b)("p",null,"Running and managing docker containers requires sudo privileges."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"sudo usermod -aG docker ${USER}\n")),Object(a.b)("h2",{id:"basic-docker-and-docker-compose"},"Basic Docker and Docker Compose"),Object(a.b)("h3",{id:"docker-folder-and-permission"},"Docker folder and permission"),Object(a.b)("p",null,"Create folder as storage docker file"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"mkdir ~/docker \n")),Object(a.b)("p",null,"Setup apporopriate permission to docker folder"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"sudo setfacl -Rdm g:docker:rwx ~/docker\nsudo chmod -R 775 ~/docker      \n")),Object(a.b)("p",null,"create docker-compose.yml file"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"nano ~/docker/docker-compose.yml\n")),Object(a.b)("h3",{id:"managing-docker"},"Managing docker"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Starting docker"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker-compose -f ~/docker/docker-compose.yml up -d\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"See docker containers"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker ps -a\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Check docker containers logs"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker-compose logs\n")),Object(a.b)("p",{parentName:"li"},"check spesific container's logs"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker-compose logs [container-name]\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Stop containers"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker-compose -f ~/docker/docker-compose.yml down\n")),Object(a.b)("p",{parentName:"li"},"stop single container"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker-compose stop [container-name]\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Docker cleanup"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",{parentName:"pre"},"docker system prune\ndocker image prune\ndocker volume prune\n")))))}l.isMDXComponent=!0}}]);